class AutismKnowledgeBase {
  static final Map<String, String> _responseCache = <String, String>{};
  static final Map<String, List<String>> _contextCache = <String, List<String>>{};
  static final Map<String, String> _semanticCache = <String, String>{};
  static final Map<String, double> _confidenceCache = <String, double>{};
  static const int _maxCacheSize = 10000;
  
  static const Map<String, Map<String, dynamic>> _knowledge = {
    'compreendendo_autismo': {
      'keywords': ['o que √©', 'que √©', 'defini√ß√£o', 'conceito', 'autismo', 'tea', 'transtorno espectro autista', 'compreendendo', 'entender', 'explique', 'significa', 'caracter√≠stica', 'condi√ß√£o', 'neurol√≥gico', 'desenvolvimento'],
      'response': '**Compreendendo o Autismo (TEA)**\n\nO Transtorno do Espectro Autista √© uma condi√ß√£o neurol√≥gica complexa que:\n\n**Caracter√≠sticas Principais:**\n‚Ä¢ Afeta o desenvolvimento da comunica√ß√£o verbal e n√£o-verbal\n‚Ä¢ Apresenta desafios na intera√ß√£o social rec√≠proca\n‚Ä¢ Manifesta padr√µes restritos e repetitivos de comportamento\n‚Ä¢ Inclui sensibilidades sensoriais diferenciadas\n‚Ä¢ N√£o √© causado por fatores psicol√≥gicos ou educacionais\n‚Ä¢ Manifesta-se de forma √∫nica em cada pessoa\n\n**Aspectos Importantes:**\n‚Ä¢ √â uma condi√ß√£o neurol√≥gica, n√£o uma doen√ßa\n‚Ä¢ Afeta aproximadamente 1 em cada 100 pessoas\n‚Ä¢ Pode ser diagnosticado em qualquer idade\n‚Ä¢ Cada pessoa no espectro tem habilidades e desafios √∫nicos\n‚Ä¢ Com apoio adequado, pessoas com TEA podem ter vidas plenas\n\n*Baseado no material "Compreendendo o Autismo"*',
      'follow_up': ['sintomas_faixa_etaria', 'causas_autismo', 'diagnostico']
    },
    
    'sintomas_faixa_etaria': {
      'keywords': ['sintomas', 'sinais', 'identificar', 'primeiros sintomas', 'beb√™', 'crian√ßa', 'adolescente', 'jovem', 'como saber', 'detectar', 'sinais precoces', 'marcos desenvolvimento', 'atraso', 'n√£o fala', 'n√£o olha', 'isolamento', 'suspeita', 'reconhecer', 'idade'],
      'response': '**Sintomas do TEA por Faixa Et√°ria**\n\n**üçº PRIMEIRA INF√ÇNCIA (0-24 meses):**\n\n**Comunica√ß√£o:**\n‚Ä¢ Aus√™ncia de balbucio aos 12 meses\n‚Ä¢ N√£o responde ao nome consistentemente\n‚Ä¢ Perda de palavras j√° adquiridas\n‚Ä¢ N√£o aponta para compartilhar interesse (18 meses)\n‚Ä¢ Aus√™ncia de gestos comunicativos\n‚Ä¢ Ecolalia precoce\n\n**Social:**\n‚Ä¢ Contato visual reduzido ou ausente\n‚Ä¢ N√£o sorri socialmente aos 6 meses\n‚Ä¢ N√£o imita express√µes faciais\n‚Ä¢ Prefer√™ncia por isolamento\n‚Ä¢ N√£o demonstra interesse em outras crian√ßas\n‚Ä¢ Dificuldade em jogos de imita√ß√£o\n\n**Comportamental:**\n‚Ä¢ Movimentos repetitivos (balan√ßar, girar)\n‚Ä¢ Fixa√ß√£o em objetos que giram\n‚Ä¢ Resist√™ncia a mudan√ßas na rotina\n‚Ä¢ Rea√ß√µes incomuns a est√≠mulos sensoriais\n‚Ä¢ Interesses restritos e intensos\n\n**üë∂ PR√â-ESCOLAR (2-5 anos):**\n\n**Comunica√ß√£o:**\n‚Ä¢ Atraso significativo na fala\n‚Ä¢ Ecolalia persistente\n‚Ä¢ Dificuldade em iniciar conversas\n‚Ä¢ Uso inadequado de pronomes\n‚Ä¢ Linguagem repetitiva ou estereotipada\n‚Ä¢ Dificuldade em compreender instru√ß√µes complexas\n\n**Social:**\n‚Ä¢ Dificuldade em brincar com outras crian√ßas\n‚Ä¢ N√£o compartilha interesses ou emo√ß√µes\n‚Ä¢ Dificuldade em fazer amizades\n‚Ä¢ N√£o compreende regras sociais b√°sicas\n‚Ä¢ Prefer√™ncia por brincadeiras solit√°rias\n‚Ä¢ Dificuldade em demonstrar empatia\n\n**Comportamental:**\n‚Ä¢ Rituais e rotinas r√≠gidas\n‚Ä¢ Comportamentos repetitivos mais complexos\n‚Ä¢ Interesses obsessivos por temas espec√≠ficos\n‚Ä¢ Dificuldade com transi√ß√µes\n‚Ä¢ Comportamentos autolesivos\n‚Ä¢ Crises frequentes com mudan√ßas\n\n**üéí ESCOLAR (6-12 anos):**\n\n**Acad√™mico:**\n‚Ä¢ Dificuldades de aprendizagem espec√≠ficas\n‚Ä¢ Problemas de aten√ß√£o e concentra√ß√£o\n‚Ä¢ Dificuldade em trabalhos em grupo\n‚Ä¢ Interpreta√ß√£o literal de instru√ß√µes\n‚Ä¢ Dificuldade com conceitos abstratos\n‚Ä¢ Habilidades desiguais entre √°reas\n\n**Social:**\n‚Ä¢ Isolamento social na escola\n‚Ä¢ Dificuldade em fazer e manter amizades\n‚Ä¢ Problemas com bullying\n‚Ä¢ N√£o compreende piadas ou sarcasmo\n‚Ä¢ Dificuldade em atividades esportivas em grupo\n‚Ä¢ Comportamentos sociais inadequados\n\n**Comportamental:**\n‚Ä¢ Interesses especiais muito intensos\n‚Ä¢ Dificuldade com mudan√ßas de rotina escolar\n‚Ä¢ Comportamentos repetitivos em sala de aula\n‚Ä¢ Dificuldade em regular emo√ß√µes\n‚Ä¢ Ansiedade em situa√ß√µes sociais\n‚Ä¢ Necessidade de previsibilidade\n\n**üßë ADOLESC√äNCIA (13-18 anos):**\n\n**Social:**\n‚Ä¢ Isolamento social aumentado\n‚Ä¢ Dificuldade com relacionamentos rom√¢nticos\n‚Ä¢ N√£o compreende c√≥digos sociais adolescentes\n‚Ä¢ Dificuldade com mudan√ßas corporais\n‚Ä¢ Ansiedade social intensa\n‚Ä¢ Dificuldade em grupos de pares\n\n**Emocional:**\n‚Ä¢ Ansiedade e depress√£o\n‚Ä¢ Dificuldade com identidade pessoal\n‚Ä¢ Baixa autoestima\n‚Ä¢ Dificuldade em expressar emo√ß√µes\n‚Ä¢ Comportamentos de risco reduzidos\n‚Ä¢ Necessidade de apoio emocional\n\n**Comportamental:**\n‚Ä¢ Interesses especiais podem dominar a vida\n‚Ä¢ Dificuldade com independ√™ncia\n‚Ä¢ Resist√™ncia a mudan√ßas desenvolvimentais\n‚Ä¢ Comportamentos repetitivos persistentes\n‚Ä¢ Dificuldade com planejamento futuro\n‚Ä¢ Necessidade de estrutura continuada\n\n**üéì JOVEM ADULTO (19-21 anos):**\n\n**Transi√ß√£o:**\n‚Ä¢ Dificuldade com transi√ß√£o para vida adulta\n‚Ä¢ Ansiedade com responsabilidades\n‚Ä¢ Necessidade de apoio para decis√µes\n‚Ä¢ Dificuldade com mudan√ßas de ambiente\n‚Ä¢ Desafios com independ√™ncia financeira\n‚Ä¢ Necessidade de suporte continuado\n\n**Profissional/Acad√™mico:**\n‚Ä¢ Dificuldade em entrevistas de emprego\n‚Ä¢ Desafios no ambiente de trabalho\n‚Ä¢ Dificuldade com ensino superior\n‚Ä¢ Necessidade de adapta√ß√µes acad√™micas\n‚Ä¢ Dificuldade com networking\n‚Ä¢ Habilidades espec√≠ficas podem ser pontos fortes\n\n**Social:**\n‚Ä¢ Isolamento social continuado\n‚Ä¢ Dificuldade com relacionamentos √≠ntimos\n‚Ä¢ Desafios com vida social adulta\n‚Ä¢ Necessidade de grupos de apoio\n‚Ä¢ Dificuldade com habilidades sociais complexas\n‚Ä¢ Poss√≠vel desenvolvimento de relacionamentos significativos\n\n**‚ö†Ô∏è SINAIS DE ALERTA EM QUALQUER IDADE:**\n‚Ä¢ Perda de habilidades j√° adquiridas\n‚Ä¢ Isolamento social extremo\n‚Ä¢ Comportamentos autolesivos\n‚Ä¢ Ansiedade ou depress√£o severa\n‚Ä¢ Dificuldades funcionais significativas\n‚Ä¢ Necessidade de apoio em atividades b√°sicas\n\n**üìã MARCOS IMPORTANTES:**\n‚Ä¢ 6 meses: sorriso social\n‚Ä¢ 12 meses: apontar, balbucio\n‚Ä¢ 18 meses: primeiras palavras\n‚Ä¢ 24 meses: frases de 2 palavras\n‚Ä¢ 3 anos: brincadeira simb√≥lica\n‚Ä¢ 5 anos: intera√ß√£o social b√°sica\n‚Ä¢ 12 anos: amizades rec√≠procas\n‚Ä¢ 18 anos: prepara√ß√£o para independ√™ncia\n\n**Importante:** Sintomas variam muito entre indiv√≠duos. Identifica√ß√£o precoce permite melhores resultados com interven√ß√£o adequada.\n\n*Baseado no material "Sintomas por Faixa Et√°ria"*',
      'follow_up': ['diagnostico', 'intervencoes_precoces', 'quando_procurar_ajuda']
    },